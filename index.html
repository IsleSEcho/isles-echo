<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Isle's Echo Shop</title>
  <style>
    body { background:#151515; color:white; font-family:sans-serif; margin:0; }
    h1 { text-align:center; padding:20px; }
    .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:16px; padding:20px; }
    .card { background:#222; padding:16px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.5); }
    .price { color:#93f5b5; font-weight:bold; margin:10px 0; }
    .buy { background:#2ea565; border:none; padding:10px; width:100%; color:white; border-radius:8px; cursor:pointer; }
    .buy:hover { background:#38c172; }
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;place-items:center;}
    .sheet{background:#222;padding:20px;border-radius:12px;max-width:400px;width:90%;}
    select,input{width:100%;padding:8px;margin:8px 0;border-radius:6px;}
  </style>
</head>
<body>

<h1>Isle's Echo Shop</h1>
<div class="grid" id="grid"></div>

<!-- Модалка -->
<div class="modal" id="modal">
  <div class="sheet">
    <h2 id="mTitle">Покупка</h2>
    <p id="mNote"></p>
    <form action="pay.php" method="POST">
      <input type="hidden" name="dino" id="fDino">
      <select name="variant" id="fVariant"></select>
      <input type="hidden" name="price" id="fPrice">
      <label>Email для чека:</label>
      <input type="email" name="email" required>
      <div class="price" id="mPrice"></div>
      <button type="submit" class="buy">Оплатить через FreeKassa</button>
    </form>
    <button onclick="closeModal()" style="margin-top:10px;padding:8px;width:100%;">Отмена</button>
  </div>
</div>

<script>
const dinos = [
  {name:"Dryosaurus",variants:[{v:"Default",p:25}]},
  {name:"Avaceratops",variants:[{v:"Default",p:30}]},
  {name:"Gallimimus",variants:[{v:"Default",p:45}]},

  {name:"Maiasaura",variants:[{v:"Male",p:90},{v:"Female",p:130}]},
  {name:"Diabloceratops",variants:[{v:"Male",p:110},{v:"Female",p:165}]},
  {name:"Pachycephalosaurus",variants:[{v:"Male",p:40},{v:"Female",p:90}]},

  {name:"Stegosaurus",variants:[{v:"Male",p:210},{v:"Female",p:275}]},
  {name:"Ankylosaurus",variants:[{v:"Male",p:190},{v:"Female",p:255}]},
  {name:"Therizinosaurus",variants:[{v:"Male",p:225},{v:"Female",p:290}]},
  {name:"Triceratops",variants:[{v:"Male",p:235},{v:"Female",p:295}]},
  {name:"Shantungosaurus",variants:[{v:"Male",p:245},{v:"Female",p:310}]},
  {name:"Camarasaurus",variants:[{v:"Default",p:340}]},
  {name:"Puertasaurus",variants:[{v:"Default",p:445}]},

  {name:"Herrerasaurus",variants:[{v:"Default",p:25}]},
  {name:"Austroraptor",variants:[{v:"Default",p:25}]},
  {name:"Utahraptor",variants:[{v:"Default",p:55}]},
  {name:"Dilophosaurus",variants:[{v:"Default",p:65}]},

  {name:"Ceratosaurus",variants:[{v:"Male",p:110},{v:"Female",p:150}]},
  {name:"Allosaurus",variants:[{v:"Male",p:150},{v:"Female",p:190}]},
  {name:"Baryonyx",variants:[{v:"Male",p:85},{v:"Female",p:125}]},
  {name:"Carnotaurus",variants:[{v:"Male",p:110},{v:"Female",p:180}]},
  {name:"Suchomimus",variants:[{v:"Male",p:150},{v:"Female",p:190}]},
  {name:"Albertosaurus",variants:[{v:"Default",p:220}]},

  {name:"Acrocanthosaurus",variants:[{v:"Male",p:190},{v:"Female",p:260}]},
  {name:"Tyrannosaurus (Subadult)",variants:[{v:"Male",p:220},{v:"Female",p:300}]},
  {name:"Tyrannosaurus (Feathered)",variants:[{v:"Default",p:350}]},
  {name:"Spinosaurus",variants:[{v:"Male",p:220},{v:"Female",p:320}]},
  {name:"Giganotosaurus",variants:[{v:"Male",p:210},{v:"Female",p:300}]}
];

const grid=document.getElementById("grid");
const modal=document.getElementById("modal");
const mTitle=document.getElementById("mTitle");
const mNote=document.getElementById("mNote");
const fDino=document.getElementById("fDino");
const fVariant=document.getElementById("fVariant");
const fPrice=document.getElementById("fPrice");
const mPrice=document.getElementById("mPrice");

function render(){
  dinos.forEach(d=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`<h3>${d.name}</h3><div class="price">от ${d.variants[0].p} RUB</div><button class="buy">Купить</button>`;
    card.querySelector(".buy").onclick=()=>openModal(d);
    grid.appendChild(card);
  });
}

function openModal(dino){
  mTitle.textContent=dino.name;
  mNote.textContent="Выберите вариант";
  fDino.value=dino.name;
  fVariant.innerHTML=dino.variants.map(v=>`<option value="${v.p}">${v.v} - ${v.p} RUB</option>`).join('');
  fPrice.value=dino.variants[0].p;
  mPrice.textContent="Цена: "+dino.variants[0].p+" RUB";
  fVariant.onchange=()=>{
    fPrice.value=fVariant.value;
    mPrice.textContent="Цена: "+fVariant.value+" RUB";
  };
  modal.style.display="grid";
}
function closeModal(){ modal.style.display="none"; }

render();
</script>
</body>
</html>
